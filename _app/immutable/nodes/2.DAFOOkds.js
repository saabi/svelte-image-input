import{f as j,a as Y}from"../chunks/DjZE1KvE.js";import{w as ve,i as C,x as de,$ as De,aG as Te,h as R,aH as pe,ap as Ie,aI as Me,aJ as Ce,aK as qe,c as A,aL as ge,y as Ae,aM as Oe,aN as Ye,aO as Re,aP as Xe,aQ as je,aE as Ne,a1 as re,u as M,B as s,aD as I,D as x,a2 as z,a3 as ne,k as he,a4 as P,a6 as _,a5 as L,aR as We,aF as ze,ai as Fe}from"../chunks/BNId94n6.js";import{d as me,e as W,s as B}from"../chunks/FkihRly-.js";import{p as S,b as te,i as ae}from"../chunks/BvPhMpWX.js";import{o as Ue}from"../chunks/BTepG1_1.js";function Be(e,t,r){ve(()=>{var a=C(()=>t(e,r?.())||{});if(r&&a?.update){var n=!1,i={};de(()=>{var o=r();De(o),n&&Te(i,o)&&(i=o,a.update(o))}),n=!0}if(a?.destroy)return()=>a.destroy()})}function _e(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=_e(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Ge(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=_e(e))&&(a&&(a+=" "),a+=t);return a}function He(e){return typeof e=="object"?Ge(e):e??""}function Ke(e,t,r){var a=e==null?"":""+e;return t&&(a=a?a+" "+t:t),a===""?null:a}function Qe(e,t){return e==null?null:String(e)}function be(e,t,r,a,n,i){var o=e.__className;if(R||o!==r||o===void 0){var l=Ke(r,a);(!R||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):e.className=l),e.__className=r}return i}function Ve(e,t,r,a){var n=e.__style;if(R||n!==t){var i=Qe(t);(!R||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}return a}function we(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Me(t))return Ce();for(var a of e.options)a.selected=t.includes(F(a));return}for(a of e.options){var n=F(a);if(qe(n,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Je(e){var t=new MutationObserver(()=>{we(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ie(()=>{t.disconnect()})}function Z(e,t,r=t){var a=new WeakSet,n=!0;pe(e,"change",i=>{var o=i?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(o),F);else{var h=e.querySelector(o)??e.querySelector("option:not([disabled])");l=h&&F(h)}r(l),A!==null&&a.add(A)}),ve(()=>{var i=t();if(e===document.activeElement){var o=ge??A;if(a.has(o))return}if(we(e,i,n),n&&i===void 0){var l=e.querySelector(":checked");l!==null&&(i=F(l),r(i))}e.__value=i,n=!1}),Je(e)}function F(e){return"__value"in e?e.__value:e.value}const Ze=Symbol("is custom element"),$e=Symbol("is html");function et(e){if(R){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var a=e.value;X(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var n=e.checked;X(e,"checked",null),e.checked=n}}};e.__on_r=r,Ae(r),Oe()}}function X(e,t,r,a){var n=tt(e);R&&(n[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||n[t]!==(n[t]=r)&&(t==="loading"&&(e[Ye]=r),r==null?e.removeAttribute(t):typeof r!="string"&&at(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function tt(e){return e.__attributes??={[Ze]:e.nodeName.includes("-"),[$e]:e.namespaceURI===Re}}var fe=new Map;function at(e){var t=e.getAttribute("is")||e.nodeName,r=fe.get(t);if(r)return r;fe.set(t,r=[]);for(var a,n=e,i=Element.prototype;i!==n;){a=je(n);for(var o in a)a[o].set&&r.push(o);n=Xe(n)}return r}function rt(e,t,r=t){var a=new WeakSet;pe(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=$(e)?ee(i):i,r(i),A!==null&&a.add(A),await Ne(),i!==(i=t())){var o=e.selectionStart,l=e.selectionEnd,h=e.value.length;if(e.value=i??"",l!==null){var b=e.value.length;o===l&&l===h&&b>h?(e.selectionStart=b,e.selectionEnd=b):(e.selectionStart=o,e.selectionEnd=Math.min(l,b))}}}),(R&&e.defaultValue!==e.value||C(t)==null&&e.value)&&(r($(e)?ee(e.value):e.value),A!==null&&a.add(A)),de(()=>{var n=t();if(e===document.activeElement){var i=ge??A;if(a.has(i))return}$(e)&&n===ee(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function $(e){var t=e.type;return t==="number"||t==="range"}function ee(e){return e===""?null:+e}function nt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U={},ce;function it(){if(ce)return U;ce=1,Object.defineProperty(U,"__esModule",{value:!0});var e={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture",maxTouchPoints:"msMaxTouchPoints"},t={update:function(){typeof window<"u"&&("PointerEvent"in window?(t.hasApi=!0,t.requiresPrefix=!1):window.navigator&&"msPointerEnabled"in window.navigator?(t.hasApi=!0,t.requiresPrefix=!0):(t.hasApi=!1,t.requiresPrefix=void 0),t.maxTouchPoints=t.hasApi&&window.navigator&&window.navigator[t.prefix("maxTouchPoints")]||void 0,t.hasTouch=t.hasApi?t.maxTouchPoints>0:void 0)},prefix:function(a){return t.requiresPrefix&&e[a]||a}};return t.update(),U.default=t,U}var st=it();const O=nt(st);function ot(e){let t={};for(let r in e)t[r]=e[r];return t}function G(e,t,r,a){const n=e.getMinScale(),i=e.getScale();t<n&&(t=n);let o=e.getOffsetX(),l=e.getOffsetY();o=t*(o+r)/i-r,l=t*(l+a)/i-a,e.setOffsetX(o),e.setOffsetY(l),e.setScale(t)}function ye(e,t,r){if(e.shiftKey)t||(t={x:e.offsetX,y:e.offsetY,s:r.getScale()}),G(r,t.s+(t.y-e.offsetY)/50,t.x,t.y);else{t=null;let a=r.getOffsetX(),n=r.getOffsetY();a-=e.movementX,n-=e.movementY,r.setOffsetX(a),r.setOffsetY(n)}return t}function lt(e,t){function r(u){u.preventDefault(),u.stopPropagation();const d=Math.sign(u.deltaY);G(t,t.getScale()-d/10,u.offsetX,u.offsetY)}const a=[];function n(u){for(var d=0;d<a.length;d++)if(a[d].pointerId===u.pointerId){const p=ot(u);a[d]=p;break}d===a.length&&a.push(u)}function i(u){for(var d=0;d<a.length;d++)if(a[d].pointerId===u.pointerId){a.splice(d,1);break}}let o=null;function l(u){e.setPointerCapture(u.pointerId),t.getDragging()||(e.addEventListener(O.prefix("pointermove"),h,!0),t.setDragging(!0)),u.preventDefault(),u.stopPropagation(),n(u)}function h(u){if(a.length===1)o=ye(u,o,t);else if(a.length===2){const p=a[0].offsetX,E=a[0].offsetY,c=a[1].offsetX,w=a[1].offsetY,g=u.offsetX,D=u.offsetY,T=p-c,v=E-w,y=Math.sqrt(T*T+v*v);let m,f;u.pointerId===a[0].pointerId?(m=g-c,f=D-w):(m=g-p,f=D-E);var d=Math.sqrt(m*m+f*f);G(t,t.getScale()*d/y,g,D)}u.preventDefault(),u.stopPropagation(),n(u)}function b(u){u.preventDefault(),u.stopPropagation(),i(u),e.releasePointerCapture(u.pointerId),a.length===0&&(t.setDragging(!1),e.removeEventListener(O.prefix("pointermove"),h,!0),o=null)}return e.addEventListener(O.prefix("pointerdown"),l,!0),e.addEventListener(O.prefix("pointerup"),b,!0),e.addEventListener("wheel",r,!0),{destroy:()=>{e.removeEventListener(O.prefix("pointerdown"),l,!0),e.removeEventListener(O.prefix("pointerup"),b,!0),e.removeEventListener("wheel",r,!0)}}}function ut(e,t){function r(l){l.preventDefault(),l.stopPropagation();const h=Math.sign(l.deltaY);G(t,t.getScale()-h/10,l.offsetX,l.offsetY)}let a=null;function n(l){typeof e.setCapture=="function"&&e.setCapture(),t.getDragging()||(e.addEventListener("mousemove",i,!0),window.addEventListener("mouseup",o,!0),t.setDragging(!0)),l.preventDefault(),l.stopPropagation()}function i(l){a=ye(l,a,t),l.preventDefault(),l.stopPropagation()}function o(l){l.preventDefault(),l.stopPropagation(),typeof e.releaseCapture=="function"&&e.releaseCapture(),t.setDragging(!1),e.removeEventListener("mousemove",i,!0),window.removeEventListener("mouseup",o,!0),a=null}return e.addEventListener("mousedown",n,!0),e.addEventListener("mouseup",o,!0),e.addEventListener("wheel",r,!0),{destroy:()=>{e.removeEventListener("mousedown",n,!0),e.removeEventListener("mouseup",o,!0),e.removeEventListener("wheel",r,!0)}}}const ft=!!globalThis.window,ct=ft&&!!O.maxTouchPoints,vt=ct?lt:ut;var dt=j("<canvas></canvas>");function pt(e,t){re(t,!0);let r=S(t,"src",15),a=S(t,"url",15),n=S(t,"quality",15),i=S(t,"width",15),o=S(t,"height",15),l=S(t,"realTime",15),h=S(t,"crossOrigin",15),b=S(t,"classes",15),u=S(t,"showCompressedResult",15),d=I(void 0),p=I(void 0),E,c=I(0),w=I(0),g=I(1),D=I(1),T=I(!1),v={getMinScale(){return s(D)},getScale(){return s(g)},setScale(f){x(g,f,!0)},getOffsetX(){return s(c)},getOffsetY(){return s(w)},setOffsetX(f){x(c,f,!0)},setOffsetY(f){x(w,f,!0)},setDragging(f){!l()&&f===!1&&a(s(d).toDataURL("image/jpeg",n())),x(T,f,!0)},getDragging(){return s(T)}};M(()=>{(i()==null||i()===0)&&C(()=>{i(256)})}),M(()=>{(o()==null||o()===0)&&C(()=>{o(256)})}),M(()=>{r()||C(()=>{r("")})}),M(()=>{n()||C(()=>{n(.5)})}),M(()=>{l()==null&&C(()=>{l(!1)})}),M(()=>{h()==null&&C(()=>{h(!1)})}),M(()=>{b()==null&&C(()=>{b("")})}),M(()=>{u()==null&&C(()=>{u(!1)})}),M(()=>{s(p)&&(s(p).crossOrigin=h()?"anonymous":null)}),M(()=>{s(p)&&(s(p).src=r())}),M(()=>{n(),i(),o(),s(c),s(w),s(g),C(()=>y())}),Ue(()=>{E=s(d).getContext("2d"),x(p,new Image,!0),s(p).onload=function(){x(c,0),x(w,0),x(g,x(D,Math.max(i()/s(p).width,o()/s(p).height),!0),!0)}});function y(){if(!s(p)||!E)return;s(c)<0&&x(c,0),s(w)<0&&x(w,0);let f=s(p).width*s(g)-i();s(c)>f&&x(c,f,!0),f=s(p).height*s(g)-o(),s(w)>f&&x(w,f,!0),E.resetTransform(),E.clearRect(0,0,i(),o()),E.translate(-s(c),-s(w)),E.scale(s(g),s(g)),E.drawImage(s(p),0,0),(l()||!s(T))&&a(s(d).toDataURL("image/jpeg",n()))}var m=dt();te(m,f=>x(d,f),()=>s(d)),Be(m,(f,q)=>vt?.(f,q),()=>v),z(()=>{X(m,"width",i()),X(m,"height",o()),be(m,1,He(b()),"svelte-1sswqpx")}),Y(e,m),ne()}var gt=j('<div class="drop-area svelte-186px3q"> <button class="svelte-186px3q"> </button></div> <input type="file" accept="image/*" class="hidden svelte-186px3q"/>',1);function ht(e,t){re(t,!0);let r=S(t,"prefixText",3,"Drop, paste, or"),a=S(t,"buttonText",3,"load an image"),n=S(t,"pasteScope",3,"window"),i=I(void 0),o=I(void 0);const l=v=>{v.preventDefault()},h=v=>{const y=new FileReader;y.onload=m=>{if(!m.target)return;const f=m.target.result;t.onImageLoaded?.(f)},y.readAsDataURL(v)},b=v=>{const y=v.target?.files?.[0];y&&h(y)},u=v=>{v.preventDefault();const y=v.dataTransfer?.items;if(!y)return;const m=Array.from(y).find(q=>q.kind==="file"&&q.type.startsWith("image/"));if(!m)return;const f=m.getAsFile();f&&h(f)},d=async v=>{if(n()==="component"&&(!s(o)||!s(o).contains(document.activeElement)&&s(o)!==document.activeElement))return;const y=v.clipboardData?.items;if(!y)return;const m=Array.from(y).find(q=>q.type.indexOf("image")===0);if(!m)return;v.preventDefault();const f=m.getAsFile();f&&h(f)},p=()=>{s(i)?.click()};var E=gt();W("paste",We,function(...v){(n()==="window"?d:void 0)?.apply(this,v)});var c=he(E),w=P(c),g=_(w);g.__click=p;var D=P(g,!0);L(g),L(c),te(c,v=>x(o,v),()=>s(o));var T=_(c,2);T.__change=b,te(T,v=>x(i,v),()=>s(i)),z(()=>{X(c,"role",n()==="component"?"button":void 0),X(c,"tabindex",n()==="component"?0:void 0),B(w,`${r()??""} `),B(D,a())}),W("drop",c,u),W("dragover",c,l),W("dragenter",c,l),W("dragleave",c,l),W("paste",c,function(...v){(n()==="component"?d:void 0)?.apply(this,v)}),Y(e,E),ne()}me(["click","change"]);var mt=j('<!> <button aria-label="Clear image" class="svelte-huqjm5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: block;" class="svelte-huqjm5"><line x1="4" y1="4" x2="12" y2="12"></line><line x1="12" y1="4" x2="4" y2="12"></line></svg></button>',1),_t=j('<div class="ImageInput svelte-huqjm5"><!></div>');function bt(e,t){re(t,!0);let r=S(t,"classes",3,""),a=S(t,"crossOrigin",3,!1),n=S(t,"src",15,""),i=S(t,"width",15),o=S(t,"height",15),l=S(t,"quality",3,.5),h=S(t,"realTime",3,!1),b=S(t,"url",15,""),u=S(t,"showCompressedResult",3,!1);M(()=>{i(i()??256)}),M(()=>{o(o()??256)});const d=()=>{n(""),b("")};var p=_t(),E=P(p);{var c=g=>{var D=mt(),T=he(D);pt(T,{get classes(){return r()},get crossOrigin(){return a()},get height(){return o()},get realTime(){return h()},get src(){return n()},get showCompressedResult(){return u()},get quality(){return l()},get width(){return i()},get url(){return b()},set url(y){b(y)}});var v=_(T,2);v.__click=d,Y(g,D)},w=g=>{ht(g,{onImageLoaded:D=>n(D),get prefixText(){return t.prefixText},get buttonText(){return t.buttonText},get pasteScope(){return t.pasteScope}})};ae(E,g=>{n()?g(c):g(w,!1)})}L(p),z(()=>Ve(p,`--image-input-width: ${i()??""}px; --image-input-height: ${o()??""}px`)),Y(e,p),ne()}me(["click"]);var wt=j('<img alt="sample output"/>'),yt=j('<p class="svelte-1uha8ag"> </p>'),xt=j(`<div class="container svelte-1uha8ag"><h1 class="svelte-1uha8ag">Svelte Image Input and Manipulation Components</h1> <h2 class="svelte-1uha8ag">ImageInput Example</h2> <p class="svelte-1uha8ag">Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. The output
		image will be displayed beside along with the final size in bytes of the
		data URL.</p> <p class="svelte-1uha8ag"><strong>Paste Scope:</strong> When set to "Window" (default), paste works anywhere on the page.
		When set to "Component", paste only works when the component is focused (click on it first).
		Try switching between modes and pasting an image!</p> <label><span> </span> <input type="range" min="0.1" max="1" step="0.1"/></label> <div class="controls svelte-1uha8ag"><label><span>Theme: <a href="https://github.com/saabi/svelte-image-input/blob/main/docs/theming.md" target="_blank" rel="noopener noreferrer" class="doc-link svelte-1uha8ag" title="Theming documentation">ðŸ“–</a></span> <select><option>Default</option><option>Dark</option><option>Brand</option><option>Sophisticated</option></select></label> <label><span>Language: <a href="https://github.com/saabi/svelte-image-input/blob/main/docs/i18n.md" target="_blank" rel="noopener noreferrer" class="doc-link svelte-1uha8ag" title="Internationalization documentation">ðŸ“–</a></span> <select><option>English</option><option>EspaÃ±ol</option><option>FranÃ§ais</option></select></label> <label><span>Paste Scope: <a href="https://github.com/saabi/svelte-image-input/blob/main/docs/paste-scope.md" target="_blank" rel="noopener noreferrer" class="doc-link svelte-1uha8ag" title="Paste scope documentation">ðŸ“–</a></span> <select><option>Window (default)</option><option>Component</option></select></label></div> <div class="demo svelte-1uha8ag"><div class="input"><h3 class="svelte-1uha8ag">Input Image</h3> <div><!></div></div> <div class="output"><h3 class="svelte-1uha8ag">Output Image</h3> <div class="imagebox svelte-1uha8ag"><!></div> <!></div></div> <div class="documentation svelte-1uha8ag"><h2 class="svelte-1uha8ag">Documentation</h2> <p class="svelte-1uha8ag">Learn more about the features demonstrated above:</p> <ul class="svelte-1uha8ag"><li class="svelte-1uha8ag"><a href="https://github.com/saabi/svelte-image-input/blob/main/docs/theming.md" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Theming Guide</a> - Customize component appearance with CSS variables</li> <li class="svelte-1uha8ag"><a href="https://github.com/saabi/svelte-image-input/blob/main/docs/i18n.md" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Internationalization (i18n)</a> - Customize text labels and support multiple languages</li> <li class="svelte-1uha8ag"><a href="https://github.com/saabi/svelte-image-input/blob/main/docs/paste-scope.md" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">Paste Scope Control</a> - Control how paste events are handled</li></ul></div> <p class="svelte-1uha8ag">Check out the code on <a href="https://github.com/saabi/svelte-image-input" target="_blank" rel="noopener noreferrer" class="svelte-1uha8ag">GitHub</a>.</p></div>`);function Dt(e){let t=I(""),r=I(.9),a=I("default"),n=I("en"),i=I("window");const o={en:{prefix:"Drop, paste, or",button:"load an image"},es:{prefix:"Arrastra, pega o",button:"carga una imagen"},fr:{prefix:"Glissez, collez ou",button:"chargez une image"}};let l=ze(()=>o[s(n)]);var h=xt(),b=_(P(h),8),u=P(b),d=P(u);L(u);var p=_(u,2);et(p),L(b);var E=_(b,2),c=P(E),w=_(P(c),2),g=P(w);g.value=g.__value="default";var D=_(g);D.value=D.__value="dark";var T=_(D);T.value=T.__value="brand";var v=_(T);v.value=v.__value="sophisticated",L(w),L(c);var y=_(c,2),m=_(P(y),2),f=P(m);f.value=f.__value="en";var q=_(f);q.value=q.__value="es";var ie=_(q);ie.value=ie.__value="fr",L(m),L(y);var se=_(y,2),H=_(P(se),2),K=P(H);K.value=K.__value="window";var oe=_(K);oe.value=oe.__value="component",L(H),L(se),L(E);var le=_(E,2),Q=P(le),V=_(P(Q),2),xe=P(V);bt(xe,{get quality(){return s(r)},get prefixText(){return s(l).prefix},get buttonText(){return s(l).button},get pasteScope(){return s(i)},get url(){return s(t)},set url(k){x(t,k,!0)}}),L(V),L(Q);var ue=_(Q,2),J=_(P(ue),2),Se=P(J);{var Ee=k=>{var N=wt();z(()=>X(N,"src",s(t))),Y(k,N)};ae(Se,k=>{s(t)&&k(Ee)})}L(J);var ke=_(J,2);{var Pe=k=>{var N=yt(),Le=P(N);L(N),z(()=>B(Le,`data url size: ${s(t).length??""} bytes`)),Y(k,N)};ae(ke,k=>{s(t)&&k(Pe)})}L(ue),L(le),Fe(4),L(h),z(k=>{B(d,`Quality (${k??""}%):`),be(V,1,`imagebox theme-${s(a)??""}`,"svelte-1uha8ag")},[()=>Math.round(s(r)*100)]),rt(p,()=>s(r),k=>x(r,k)),Z(w,()=>s(a),k=>x(a,k)),Z(m,()=>s(n),k=>x(n,k)),Z(H,()=>s(i),k=>x(i,k)),Y(e,h)}export{Dt as component};
