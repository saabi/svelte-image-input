import{S as ee,i as te,s as se,k as I,l as E,m as D,h as b,n as p,J as be,b as V,K as Se,H as G,o as ke,w as ne,q as O,a as A,r as T,c as U,G as _,L as j,M as Me,N as Oe,v as Te,d as W,f as qe,g as z,y as oe,z as ue,A as fe,B as ce,O as Ee,P as De,Q as ye}from"../chunks/index.8d7b790b.js";var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});var Ye={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture",maxTouchPoints:"msMaxTouchPoints"},S={update:function(){typeof window<"u"&&("PointerEvent"in window?(S.hasApi=!0,S.requiresPrefix=!1):window.navigator&&"msPointerEnabled"in window.navigator?(S.hasApi=!0,S.requiresPrefix=!0):(S.hasApi=!1,S.requiresPrefix=void 0),S.maxTouchPoints=S.hasApi&&window.navigator&&window.navigator[S.prefix("maxTouchPoints")]||void 0,S.hasTouch=S.hasApi?S.maxTouchPoints>0:void 0)},prefix:function(e){return S.requiresPrefix&&Ye[e]||e}};S.update();var F=Pe.default=S;function Re(s){let e={};for(let t in s)e[t]=s[t];return e}function $(s,e,t,n){const l=s.getMinScale(),u=s.getScale();e<l&&(e=l);let i=s.getOffsetX(),f=s.getOffsetY();i=e*(i+t)/u-t,f=e*(f+n)/u-n,s.setOffsetX(i),s.setOffsetY(f),s.setScale(e)}function Le(s,e,t){if(s.shiftKey)e||(e={x:s.offsetX,y:s.offsetY,s:t.getScale()}),$(t,e.s+(e.y-s.offsetY)/50,e.x,e.y);else{e=null;let n=t.getOffsetX(),l=t.getOffsetY();n-=s.movementX,l-=s.movementY,t.setOffsetX(n),t.setOffsetY(l)}return e}function Xe(s,e){function t(a){a.preventDefault(),a.stopPropagation();const r=Math.sign(a.deltaY);$(e,e.getScale()-r/10,a.offsetX,a.offsetY)}const n=[];function l(a){for(var r=0;r<n.length;r++)if(n[r].pointerId===a.pointerId){const o=Re(a);n[r]=o;break}r===n.length&&n.push(a)}function u(a){for(var r=0;r<n.length;r++)if(n[r].pointerId===a.pointerId){n.splice(r,1);break}}let i=null;function f(a){s.setPointerCapture(a.pointerId),e.getDragging()||(s.addEventListener(F.prefix("pointermove"),h,!0),e.setDragging(!0)),a.preventDefault(),a.stopPropagation(),l(a)}function h(a){if(n.length===1)i=Le(a,i,e);else if(n.length===2){const o=n[0].offsetX,c=n[0].offsetY,v=n[1].offsetX,g=n[1].offsetY,y=a.offsetX,w=a.offsetY,R=o-v,q=c-g,M=Math.sqrt(R*R+q*q);let k,Y;a.pointerId===n[0].pointerId?(k=y-v,Y=w-g):(k=y-o,Y=w-c);var r=Math.sqrt(k*k+Y*Y);$(e,e.getScale()*r/M,y,w)}a.preventDefault(),a.stopPropagation(),l(a)}function d(a){a.preventDefault(),a.stopPropagation(),u(a),s.releasePointerCapture(a.pointerId),n.length===0&&(e.setDragging(!1),s.removeEventListener(F.prefix("pointermove"),h,!0),i=null)}return s.addEventListener(F.prefix("pointerdown"),f,!0),s.addEventListener(F.prefix("pointerup"),d,!0),s.addEventListener("wheel",t,!0),{destroy:()=>{s.removeEventListener(F.prefix("pointerdown"),f,!0),s.removeEventListener(F.prefix("pointerup"),d,!0),s.removeEventListener("wheel",t,!0)}}}function Ae(s,e){function t(f){f.preventDefault(),f.stopPropagation();const h=Math.sign(f.deltaY);$(e,e.getScale()-h/10,f.offsetX,f.offsetY)}let n=null;function l(f){typeof s.setCapture=="function"&&s.setCapture(),e.getDragging()||(s.addEventListener("mousemove",u,!0),window.addEventListener("mouseup",i,!0),e.setDragging(!0)),f.preventDefault(),f.stopPropagation()}function u(f){n=Le(f,n,e),f.preventDefault(),f.stopPropagation()}function i(f){f.preventDefault(),f.stopPropagation(),typeof s.releaseCapture=="function"&&s.releaseCapture(),e.setDragging(!1),s.removeEventListener("mousemove",u,!0),window.removeEventListener("mouseup",i,!0),n=null}return s.addEventListener("mousedown",l,!0),s.addEventListener("mouseup",i,!0),s.addEventListener("wheel",t,!0),{destroy:()=>{s.removeEventListener("mousedown",l,!0),s.removeEventListener("mouseup",i,!0),s.removeEventListener("wheel",t,!0)}}}const Ue=typeof window<"u",Ve=Ue&&!!F.maxTouchPoints,He=Ve?Xe:Ae;function je(s){let e,t,n,l;return{c(){e=I("canvas"),this.h()},l(u){e=E(u,"CANVAS",{width:!0,height:!0,class:!0}),D(e).forEach(b),this.h()},h(){p(e,"width",s[0]),p(e,"height",s[1]),p(e,"class",t=be(s[2])+" svelte-233dc6")},m(u,i){V(u,e,i),s[15](e),n||(l=Se(He.call(null,e,s[4])),n=!0)},p(u,[i]){i&1&&p(e,"width",u[0]),i&2&&p(e,"height",u[1]),i&4&&t!==(t=be(u[2])+" svelte-233dc6")&&p(e,"class",t)},i:G,o:G,d(u){u&&b(e),s[15](null),n=!1,l()}}}function Be(s,e,t){let{src:n}=e,{url:l}=e,{quality:u}=e,{width:i}=e,{height:f}=e,{realTime:h}=e,{crossOrigin:d}=e,{classes:a}=e,{showCompressedResult:r}=e,o,c,v,g=0,y=0,w=1,R=1,q=!1,M={getMinScale(){return R},getScale(){return w},setScale(m){t(14,w=m)},getOffsetX(){return g},getOffsetY(){return y},setOffsetX(m){t(12,g=m)},setOffsetY(m){t(13,y=m)},setDragging(m){!h&&m===!1&&t(6,l=o.toDataURL("image/jpeg",u)),q=m},getDragging(){return q}};function k(){if(!c||!v)return;g<0&&t(12,g=0),y<0&&t(13,y=0);let m=c.width*w-i;g>m&&t(12,g=m),m=c.height*w-f,y>m&&t(13,y=m),v.resetTransform(),v.clearRect(0,0,i,f),v.translate(-g,-y),v.scale(w,w),v.drawImage(c,0,0),(h||!q)&&t(6,l=o.toDataURL("image/jpeg",u))}ke(()=>{v=o.getContext("2d"),t(11,c=new Image),t(11,c.onload=function(){t(12,g=0),t(13,y=0),t(14,w=R=Math.max(i/c.width,f/c.height))},c)});function Y(m){ne[m?"unshift":"push"](()=>{o=m,t(3,o)})}return s.$$set=m=>{"src"in m&&t(5,n=m.src),"url"in m&&t(6,l=m.url),"quality"in m&&t(7,u=m.quality),"width"in m&&t(0,i=m.width),"height"in m&&t(1,f=m.height),"realTime"in m&&t(8,h=m.realTime),"crossOrigin"in m&&t(9,d=m.crossOrigin),"classes"in m&&t(2,a=m.classes),"showCompressedResult"in m&&t(10,r=m.showCompressedResult)},s.$$.update=()=>{s.$$.dirty&32&&t(5,n=n||""),s.$$.dirty&64&&t(6,l=l||""),s.$$.dirty&1&&t(0,i=i||256),s.$$.dirty&2&&t(1,f=f||256),s.$$.dirty&128&&t(7,u=u||.5),s.$$.dirty&256&&t(8,h=h||!1),s.$$.dirty&512&&t(9,d=d||!1),s.$$.dirty&4&&t(2,a=a||""),s.$$.dirty&1024&&t(10,r=r||!1),s.$$.dirty&2560&&c&&t(11,c.crossOrigin=d?"anonymous":null,c),s.$$.dirty&2080&&c&&t(11,c.src=n,c),s.$$.dirty&28803&&k()},[i,f,a,o,M,n,l,u,h,d,r,c,g,y,w,Y]}class Fe extends ee{constructor(e){super(),te(this,e,Be,je,se,{src:5,url:6,quality:7,width:0,height:1,realTime:8,crossOrigin:9,classes:2,showCompressedResult:10})}}function Ge(s){let e,t,n,l,u,i,f,h;return{c(){e=I("div"),t=O(`Drop, paste, or
	`),n=I("button"),l=O("load an image"),u=A(),i=I("input"),this.h()},l(d){e=E(d,"DIV",{class:!0});var a=D(e);t=T(a,`Drop, paste, or
	`),n=E(a,"BUTTON",{class:!0});var r=D(n);l=T(r,"load an image"),r.forEach(b),a.forEach(b),u=U(d),i=E(d,"INPUT",{type:!0,accept:!0,class:!0}),this.h()},h(){p(n,"class","svelte-10x39c5"),p(e,"class","drop-area svelte-10x39c5"),p(i,"type","file"),p(i,"accept","image/*"),p(i,"class","hidden svelte-10x39c5")},m(d,a){V(d,e,a),_(e,t),_(e,n),_(n,l),V(d,u,a),V(d,i,a),s[6](i),f||(h=[j(window,"paste",s[4]),j(n,"click",s[5]),j(e,"drop",s[3]),j(e,"dragover",s[1]),j(e,"dragenter",s[1]),j(e,"dragleave",s[1]),j(i,"change",s[2])],f=!0)},p:G,i:G,o:G,d(d){d&&b(e),d&&b(u),d&&b(i),s[6](null),f=!1,Me(h)}}}function Ne(s,e,t){const n=Oe();let l;const u=o=>{o.preventDefault()},i=o=>{const c=new FileReader;c.onload=v=>{if(!v.target)return;const g=v.target.result;n("imageLoaded",{dataUrl:g})},c.readAsDataURL(o)},f=o=>{var v,g;const c=(g=(v=o.target)==null?void 0:v.files)==null?void 0:g[0];c&&i(c)},h=o=>{var y;o.preventDefault();const c=(y=o.dataTransfer)==null?void 0:y.items;if(!c)return;const v=Array.from(c).find(w=>w.kind==="file"&&w.type.startsWith("image/"));if(!v)return;const g=v.getAsFile();g&&i(g)},d=async o=>{var y;const c=(y=o.clipboardData)==null?void 0:y.items;if(!c)return;const v=Array.from(c).find(w=>w.type.indexOf("image")===0);if(!v)return;o.preventDefault();const g=v.getAsFile();g&&i(g)},a=()=>{l.click()};function r(o){ne[o?"unshift":"push"](()=>{l=o,t(0,l)})}return[l,u,f,h,d,a,r]}class We extends ee{constructor(e){super(),te(this,e,Ne,Ge,se,{})}}function ze(s){let e,t;return e=new We({}),e.$on("imageLoaded",s[11]),{c(){oe(e.$$.fragment)},l(n){ue(e.$$.fragment,n)},m(n,l){fe(e,n,l),t=!0},p:G,i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){W(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Ke(s){let e,t,n,l,u,i,f,h;function d(r){s[10](r)}let a={classes:s[4],crossOrigin:s[5],height:s[1],realTime:s[7],src:s[2],showCompressedResult:s[8],quality:s[6],width:s[0]};return s[3]!==void 0&&(a.url=s[3]),e=new Fe({props:a}),ne.push(()=>Ee(e,"url",d)),{c(){oe(e.$$.fragment),n=A(),l=I("button"),u=O("X"),this.h()},l(r){ue(e.$$.fragment,r),n=U(r),l=E(r,"BUTTON",{class:!0});var o=D(l);u=T(o,"X"),o.forEach(b),this.h()},h(){p(l,"class","svelte-i64jne")},m(r,o){fe(e,r,o),V(r,n,o),V(r,l,o),_(l,u),i=!0,f||(h=j(l,"click",s[9]),f=!0)},p(r,o){const c={};o&16&&(c.classes=r[4]),o&32&&(c.crossOrigin=r[5]),o&2&&(c.height=r[1]),o&128&&(c.realTime=r[7]),o&4&&(c.src=r[2]),o&256&&(c.showCompressedResult=r[8]),o&64&&(c.quality=r[6]),o&1&&(c.width=r[0]),!t&&o&8&&(t=!0,c.url=r[3],De(()=>t=!1)),e.$set(c)},i(r){i||(z(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){ce(e,r),r&&b(n),r&&b(l),f=!1,h()}}}function xe(s){let e,t,n,l;const u=[Ke,ze],i=[];function f(h,d){return h[2]?0:1}return t=f(s),n=i[t]=u[t](s),{c(){e=I("div"),n.c(),this.h()},l(h){e=E(h,"DIV",{class:!0});var d=D(e);n.l(d),d.forEach(b),this.h()},h(){p(e,"class","ImageInput svelte-i64jne")},m(h,d){V(h,e,d),i[t].m(e,null),l=!0},p(h,[d]){let a=t;t=f(h),t===a?i[t].p(h,d):(Te(),W(i[a],1,1,()=>{i[a]=null}),qe(),n=i[t],n?n.p(h,d):(n=i[t]=u[t](h),n.c()),z(n,1),n.m(e,null))},i(h){l||(z(n),l=!0)},o(h){W(n),l=!1},d(h){h&&b(e),i[t].d()}}}function Je(s,e,t){let{classes:n=""}=e,{crossOrigin:l=!1}=e,{src:u=""}=e,{width:i=256}=e,{height:f=256}=e,{quality:h=.5}=e,{realTime:d=!1}=e,{url:a=""}=e,{showCompressedResult:r=!1}=e;const o=()=>{t(2,u=""),t(3,a="")};function c(g){a=g,t(3,a)}const v=({detail:{dataUrl:g}})=>t(2,u=g);return s.$$set=g=>{"classes"in g&&t(4,n=g.classes),"crossOrigin"in g&&t(5,l=g.crossOrigin),"src"in g&&t(2,u=g.src),"width"in g&&t(0,i=g.width),"height"in g&&t(1,f=g.height),"quality"in g&&t(6,h=g.quality),"realTime"in g&&t(7,d=g.realTime),"url"in g&&t(3,a=g.url),"showCompressedResult"in g&&t(8,r=g.showCompressedResult)},s.$$.update=()=>{s.$$.dirty&1&&t(0,i=i??256),s.$$.dirty&2&&t(1,f=f??256)},[i,f,u,a,n,l,h,d,r,o,c,v]}class Qe extends ee{constructor(e){super(),te(this,e,Je,xe,se,{classes:4,crossOrigin:5,src:2,width:0,height:1,quality:6,realTime:7,url:3,showCompressedResult:8})}}function Ie(s){let e,t;return{c(){e=I("img"),this.h()},l(n){e=E(n,"IMG",{src:!0,alt:!0}),this.h()},h(){ye(e.src,t=s[0])||p(e,"src",t),p(e,"alt","sample output")},m(n,l){V(n,e,l)},p(n,l){l&1&&!ye(e.src,t=n[0])&&p(e,"src",t)},d(n){n&&b(e)}}}function Ze(s){let e,t,n,l,u,i,f,h,d,a,r,o,c,v,g,y,w,R,q,M,k,Y,m,B,re,H,ie,X,ae,le,K;function Ce(L){s[1](L)}let ge={};s[0]!==void 0&&(ge.url=s[0]),w=new Qe({props:ge}),ne.push(()=>Ee(w,"url",Ce));let P=s[0]&&Ie(s);return{c(){e=I("div"),t=I("h1"),n=O("Svelte Image Input and Manipulation Components"),l=A(),u=I("h2"),i=O("ImageInput Example"),f=A(),h=I("p"),d=O(`Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. Click
		"Save Image" to display the data URL.`),a=A(),r=I("div"),o=I("div"),c=I("h3"),v=O("Input Image"),g=A(),y=I("div"),oe(w.$$.fragment),q=A(),M=I("div"),k=I("h3"),Y=O("Output Image"),m=A(),B=I("div"),P&&P.c(),re=A(),H=I("p"),ie=O("Check out the code on "),X=I("a"),ae=O("GitHub"),le=O("."),this.h()},l(L){e=E(L,"DIV",{class:!0});var C=D(e);t=E(C,"H1",{class:!0});var N=D(t);n=T(N,"Svelte Image Input and Manipulation Components"),N.forEach(b),l=U(C),u=E(C,"H2",{class:!0});var he=D(u);i=T(he,"ImageInput Example"),he.forEach(b),f=U(C),h=E(C,"P",{class:!0});var de=D(h);d=T(de,`Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. Click
		"Save Image" to display the data URL.`),de.forEach(b),a=U(C),r=E(C,"DIV",{class:!0});var x=D(r);o=E(x,"DIV",{class:!0});var J=D(o);c=E(J,"H3",{class:!0});var me=D(c);v=T(me,"Input Image"),me.forEach(b),g=U(J),y=E(J,"DIV",{class:!0});var pe=D(y);ue(w.$$.fragment,pe),pe.forEach(b),J.forEach(b),q=U(x),M=E(x,"DIV",{class:!0});var Q=D(M);k=E(Q,"H3",{class:!0});var _e=D(k);Y=T(_e,"Output Image"),_e.forEach(b),m=U(Q),B=E(Q,"DIV",{class:!0});var ve=D(B);P&&P.l(ve),ve.forEach(b),Q.forEach(b),x.forEach(b),re=U(C),H=E(C,"P",{class:!0});var Z=D(H);ie=T(Z,"Check out the code on "),X=E(Z,"A",{href:!0,target:!0,rel:!0,class:!0});var we=D(X);ae=T(we,"GitHub"),we.forEach(b),le=T(Z,"."),Z.forEach(b),C.forEach(b),this.h()},h(){p(t,"class","svelte-abcas6"),p(u,"class","svelte-abcas6"),p(h,"class","svelte-abcas6"),p(c,"class","svelte-abcas6"),p(y,"class","imagebox svelte-abcas6"),p(o,"class","input"),p(k,"class","svelte-abcas6"),p(B,"class","imagebox svelte-abcas6"),p(M,"class","output"),p(r,"class","demo svelte-abcas6"),p(X,"href","https://github.com/saabi/svelte-image-input"),p(X,"target","_blank"),p(X,"rel","noopener noreferrer"),p(X,"class","svelte-abcas6"),p(H,"class","svelte-abcas6"),p(e,"class","container svelte-abcas6")},m(L,C){V(L,e,C),_(e,t),_(t,n),_(e,l),_(e,u),_(u,i),_(e,f),_(e,h),_(h,d),_(e,a),_(e,r),_(r,o),_(o,c),_(c,v),_(o,g),_(o,y),fe(w,y,null),_(r,q),_(r,M),_(M,k),_(k,Y),_(M,m),_(M,B),P&&P.m(B,null),_(e,re),_(e,H),_(H,ie),_(H,X),_(X,ae),_(H,le),K=!0},p(L,[C]){const N={};!R&&C&1&&(R=!0,N.url=L[0],De(()=>R=!1)),w.$set(N),L[0]?P?P.p(L,C):(P=Ie(L),P.c(),P.m(B,null)):P&&(P.d(1),P=null)},i(L){K||(z(w.$$.fragment,L),K=!0)},o(L){W(w.$$.fragment,L),K=!1},d(L){L&&b(e),ce(w),P&&P.d()}}}function $e(s,e,t){let n="";function l(u){n=u,t(0,n)}return[n,l]}class tt extends ee{constructor(e){super(),te(this,e,$e,Ze,se,{})}}export{tt as default};
