import{S as te,i as se,s as ne,k as I,l as E,m as D,h as b,n as p,J as ye,b as V,K as ke,H as N,o as Me,w as ie,q as O,a as A,r as T,c as U,G as _,L as B,M as Oe,N as Te,p as $,v as qe,d as j,f as Ye,g as x,y as ue,z as fe,A as ce,B as ge,O as De,P as Pe,Q as Ie}from"../chunks/index.8d7b790b.js";var Le={};Object.defineProperty(Le,"__esModule",{value:!0});var Re={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture",maxTouchPoints:"msMaxTouchPoints"},S={update:function(){typeof window<"u"&&("PointerEvent"in window?(S.hasApi=!0,S.requiresPrefix=!1):window.navigator&&"msPointerEnabled"in window.navigator?(S.hasApi=!0,S.requiresPrefix=!0):(S.hasApi=!1,S.requiresPrefix=void 0),S.maxTouchPoints=S.hasApi&&window.navigator&&window.navigator[S.prefix("maxTouchPoints")]||void 0,S.hasTouch=S.hasApi?S.maxTouchPoints>0:void 0)},prefix:function(e){return S.requiresPrefix&&Re[e]||e}};S.update();var G=Le.default=S;function Xe(s){let e={};for(let t in s)e[t]=s[t];return e}function ee(s,e,t,n){const a=s.getMinScale(),u=s.getScale();e<a&&(e=a);let r=s.getOffsetX(),f=s.getOffsetY();r=e*(r+t)/u-t,f=e*(f+n)/u-n,s.setOffsetX(r),s.setOffsetY(f),s.setScale(e)}function Ce(s,e,t){if(s.shiftKey)e||(e={x:s.offsetX,y:s.offsetY,s:t.getScale()}),ee(t,e.s+(e.y-s.offsetY)/50,e.x,e.y);else{e=null;let n=t.getOffsetX(),a=t.getOffsetY();n-=s.movementX,a-=s.movementY,t.setOffsetX(n),t.setOffsetY(a)}return e}function Ae(s,e){function t(l){l.preventDefault(),l.stopPropagation();const i=Math.sign(l.deltaY);ee(e,e.getScale()-i/10,l.offsetX,l.offsetY)}const n=[];function a(l){for(var i=0;i<n.length;i++)if(n[i].pointerId===l.pointerId){const o=Xe(l);n[i]=o;break}i===n.length&&n.push(l)}function u(l){for(var i=0;i<n.length;i++)if(n[i].pointerId===l.pointerId){n.splice(i,1);break}}let r=null;function f(l){s.setPointerCapture(l.pointerId),e.getDragging()||(s.addEventListener(G.prefix("pointermove"),h,!0),e.setDragging(!0)),l.preventDefault(),l.stopPropagation(),a(l)}function h(l){if(n.length===1)r=Ce(l,r,e);else if(n.length===2){const o=n[0].offsetX,c=n[0].offsetY,v=n[1].offsetX,g=n[1].offsetY,y=l.offsetX,w=l.offsetY,R=o-v,q=c-g,M=Math.sqrt(R*R+q*q);let k,Y;l.pointerId===n[0].pointerId?(k=y-v,Y=w-g):(k=y-o,Y=w-c);var i=Math.sqrt(k*k+Y*Y);ee(e,e.getScale()*i/M,y,w)}l.preventDefault(),l.stopPropagation(),a(l)}function d(l){l.preventDefault(),l.stopPropagation(),u(l),s.releasePointerCapture(l.pointerId),n.length===0&&(e.setDragging(!1),s.removeEventListener(G.prefix("pointermove"),h,!0),r=null)}return s.addEventListener(G.prefix("pointerdown"),f,!0),s.addEventListener(G.prefix("pointerup"),d,!0),s.addEventListener("wheel",t,!0),{destroy:()=>{s.removeEventListener(G.prefix("pointerdown"),f,!0),s.removeEventListener(G.prefix("pointerup"),d,!0),s.removeEventListener("wheel",t,!0)}}}function Ue(s,e){function t(f){f.preventDefault(),f.stopPropagation();const h=Math.sign(f.deltaY);ee(e,e.getScale()-h/10,f.offsetX,f.offsetY)}let n=null;function a(f){typeof s.setCapture=="function"&&s.setCapture(),e.getDragging()||(s.addEventListener("mousemove",u,!0),window.addEventListener("mouseup",r,!0),e.setDragging(!0)),f.preventDefault(),f.stopPropagation()}function u(f){n=Ce(f,n,e),f.preventDefault(),f.stopPropagation()}function r(f){f.preventDefault(),f.stopPropagation(),typeof s.releaseCapture=="function"&&s.releaseCapture(),e.setDragging(!1),s.removeEventListener("mousemove",u,!0),window.removeEventListener("mouseup",r,!0),n=null}return s.addEventListener("mousedown",a,!0),s.addEventListener("mouseup",r,!0),s.addEventListener("wheel",t,!0),{destroy:()=>{s.removeEventListener("mousedown",a,!0),s.removeEventListener("mouseup",r,!0),s.removeEventListener("wheel",t,!0)}}}const Ve=!!globalThis.window,He=Ve&&!!G.maxTouchPoints,Be=He?Ae:Ue;function Fe(s){let e,t,n,a;return{c(){e=I("canvas"),this.h()},l(u){e=E(u,"CANVAS",{width:!0,height:!0,class:!0}),D(e).forEach(b),this.h()},h(){p(e,"width",s[0]),p(e,"height",s[1]),p(e,"class",t=ye(s[2])+" svelte-233dc6")},m(u,r){V(u,e,r),s[15](e),n||(a=ke(Be.call(null,e,s[4])),n=!0)},p(u,[r]){r&1&&p(e,"width",u[0]),r&2&&p(e,"height",u[1]),r&4&&t!==(t=ye(u[2])+" svelte-233dc6")&&p(e,"class",t)},i:N,o:N,d(u){u&&b(e),s[15](null),n=!1,a()}}}function Ge(s,e,t){let{src:n}=e,{url:a}=e,{quality:u}=e,{width:r}=e,{height:f}=e,{realTime:h}=e,{crossOrigin:d}=e,{classes:l}=e,{showCompressedResult:i}=e,o,c,v,g=0,y=0,w=1,R=1,q=!1,M={getMinScale(){return R},getScale(){return w},setScale(m){t(14,w=m)},getOffsetX(){return g},getOffsetY(){return y},setOffsetX(m){t(12,g=m)},setOffsetY(m){t(13,y=m)},setDragging(m){!h&&m===!1&&t(6,a=o.toDataURL("image/jpeg",u)),q=m},getDragging(){return q}};function k(){if(!c||!v)return;g<0&&t(12,g=0),y<0&&t(13,y=0);let m=c.width*w-r;g>m&&t(12,g=m),m=c.height*w-f,y>m&&t(13,y=m),v.resetTransform(),v.clearRect(0,0,r,f),v.translate(-g,-y),v.scale(w,w),v.drawImage(c,0,0),(h||!q)&&t(6,a=o.toDataURL("image/jpeg",u))}Me(()=>{v=o.getContext("2d"),t(11,c=new Image),t(11,c.onload=function(){t(12,g=0),t(13,y=0),t(14,w=R=Math.max(r/c.width,f/c.height))},c)});function Y(m){ie[m?"unshift":"push"](()=>{o=m,t(3,o)})}return s.$$set=m=>{"src"in m&&t(5,n=m.src),"url"in m&&t(6,a=m.url),"quality"in m&&t(7,u=m.quality),"width"in m&&t(0,r=m.width),"height"in m&&t(1,f=m.height),"realTime"in m&&t(8,h=m.realTime),"crossOrigin"in m&&t(9,d=m.crossOrigin),"classes"in m&&t(2,l=m.classes),"showCompressedResult"in m&&t(10,i=m.showCompressedResult)},s.$$.update=()=>{s.$$.dirty&32&&t(5,n=n||""),s.$$.dirty&64&&t(6,a=a||""),s.$$.dirty&1&&t(0,r=r||256),s.$$.dirty&2&&t(1,f=f||256),s.$$.dirty&128&&t(7,u=u||.5),s.$$.dirty&256&&t(8,h=h||!1),s.$$.dirty&512&&t(9,d=d||!1),s.$$.dirty&4&&t(2,l=l||""),s.$$.dirty&1024&&t(10,i=i||!1),s.$$.dirty&2560&&c&&t(11,c.crossOrigin=d?"anonymous":null,c),s.$$.dirty&2080&&c&&t(11,c.src=n,c),s.$$.dirty&28803&&k()},[r,f,l,o,M,n,a,u,h,d,i,c,g,y,w,Y]}class Ne extends te{constructor(e){super(),se(this,e,Ge,Fe,ne,{src:5,url:6,quality:7,width:0,height:1,realTime:8,crossOrigin:9,classes:2,showCompressedResult:10})}}function We(s){let e,t,n,a,u,r,f,h;return{c(){e=I("div"),t=O(`Drop, paste, or
	`),n=I("button"),a=O("load an image"),u=A(),r=I("input"),this.h()},l(d){e=E(d,"DIV",{class:!0});var l=D(e);t=T(l,`Drop, paste, or
	`),n=E(l,"BUTTON",{class:!0});var i=D(n);a=T(i,"load an image"),i.forEach(b),l.forEach(b),u=U(d),r=E(d,"INPUT",{type:!0,accept:!0,class:!0}),this.h()},h(){p(n,"class","svelte-10x39c5"),p(e,"class","drop-area svelte-10x39c5"),p(r,"type","file"),p(r,"accept","image/*"),p(r,"class","hidden svelte-10x39c5")},m(d,l){V(d,e,l),_(e,t),_(e,n),_(n,a),V(d,u,l),V(d,r,l),s[6](r),f||(h=[B(window,"paste",s[4]),B(n,"click",s[5]),B(e,"drop",s[3]),B(e,"dragover",s[1]),B(e,"dragenter",s[1]),B(e,"dragleave",s[1]),B(r,"change",s[2])],f=!0)},p:N,i:N,o:N,d(d){d&&b(e),d&&b(u),d&&b(r),s[6](null),f=!1,Oe(h)}}}function je(s,e,t){const n=Te();let a;const u=o=>{o.preventDefault()},r=o=>{const c=new FileReader;c.onload=v=>{if(!v.target)return;const g=v.target.result;n("imageLoaded",{dataUrl:g})},c.readAsDataURL(o)},f=o=>{var v,g;const c=(g=(v=o.target)==null?void 0:v.files)==null?void 0:g[0];c&&r(c)},h=o=>{var y;o.preventDefault();const c=(y=o.dataTransfer)==null?void 0:y.items;if(!c)return;const v=Array.from(c).find(w=>w.kind==="file"&&w.type.startsWith("image/"));if(!v)return;const g=v.getAsFile();g&&r(g)},d=async o=>{var y;const c=(y=o.clipboardData)==null?void 0:y.items;if(!c)return;const v=Array.from(c).find(w=>w.type.indexOf("image")===0);if(!v)return;o.preventDefault();const g=v.getAsFile();g&&r(g)},l=()=>{a.click()};function i(o){ie[o?"unshift":"push"](()=>{a=o,t(0,a)})}return[a,u,f,h,d,l,i]}class xe extends te{constructor(e){super(),se(this,e,je,We,ne,{})}}function ze(s){let e,t;return e=new xe({}),e.$on("imageLoaded",s[11]),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,a){ce(e,n,a),t=!0},p:N,i(n){t||(x(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ge(e,n)}}}function Ke(s){let e,t,n,a,u,r,f,h;function d(i){s[10](i)}let l={classes:s[4],crossOrigin:s[5],height:s[1],realTime:s[7],src:s[2],showCompressedResult:s[8],quality:s[6],width:s[0]};return s[3]!==void 0&&(l.url=s[3]),e=new Ne({props:l}),ie.push(()=>De(e,"url",d)),{c(){ue(e.$$.fragment),n=A(),a=I("button"),u=O("X"),this.h()},l(i){fe(e.$$.fragment,i),n=U(i),a=E(i,"BUTTON",{class:!0});var o=D(a);u=T(o,"X"),o.forEach(b),this.h()},h(){p(a,"class","svelte-8cxrdt")},m(i,o){ce(e,i,o),V(i,n,o),V(i,a,o),_(a,u),r=!0,f||(h=B(a,"click",s[9]),f=!0)},p(i,o){const c={};o&16&&(c.classes=i[4]),o&32&&(c.crossOrigin=i[5]),o&2&&(c.height=i[1]),o&128&&(c.realTime=i[7]),o&4&&(c.src=i[2]),o&256&&(c.showCompressedResult=i[8]),o&64&&(c.quality=i[6]),o&1&&(c.width=i[0]),!t&&o&8&&(t=!0,c.url=i[3],Pe(()=>t=!1)),e.$set(c)},i(i){r||(x(e.$$.fragment,i),r=!0)},o(i){j(e.$$.fragment,i),r=!1},d(i){ge(e,i),i&&b(n),i&&b(a),f=!1,h()}}}function Je(s){let e,t,n,a;const u=[Ke,ze],r=[];function f(h,d){return h[2]?0:1}return t=f(s),n=r[t]=u[t](s),{c(){e=I("div"),n.c(),this.h()},l(h){e=E(h,"DIV",{class:!0,style:!0});var d=D(e);n.l(d),d.forEach(b),this.h()},h(){p(e,"class","ImageInput svelte-8cxrdt"),$(e,"--image-input-width",s[0]+"px"),$(e,"--image-input-height",s[1]+"px")},m(h,d){V(h,e,d),r[t].m(e,null),a=!0},p(h,[d]){let l=t;t=f(h),t===l?r[t].p(h,d):(qe(),j(r[l],1,1,()=>{r[l]=null}),Ye(),n=r[t],n?n.p(h,d):(n=r[t]=u[t](h),n.c()),x(n,1),n.m(e,null)),(!a||d&1)&&$(e,"--image-input-width",h[0]+"px"),(!a||d&2)&&$(e,"--image-input-height",h[1]+"px")},i(h){a||(x(n),a=!0)},o(h){j(n),a=!1},d(h){h&&b(e),r[t].d()}}}function Qe(s,e,t){let{classes:n=""}=e,{crossOrigin:a=!1}=e,{src:u=""}=e,{width:r=256}=e,{height:f=256}=e,{quality:h=.5}=e,{realTime:d=!1}=e,{url:l=""}=e,{showCompressedResult:i=!1}=e;const o=()=>{t(2,u=""),t(3,l="")};function c(g){l=g,t(3,l)}const v=({detail:{dataUrl:g}})=>t(2,u=g);return s.$$set=g=>{"classes"in g&&t(4,n=g.classes),"crossOrigin"in g&&t(5,a=g.crossOrigin),"src"in g&&t(2,u=g.src),"width"in g&&t(0,r=g.width),"height"in g&&t(1,f=g.height),"quality"in g&&t(6,h=g.quality),"realTime"in g&&t(7,d=g.realTime),"url"in g&&t(3,l=g.url),"showCompressedResult"in g&&t(8,i=g.showCompressedResult)},s.$$.update=()=>{s.$$.dirty&1&&t(0,r=r??256),s.$$.dirty&2&&t(1,f=f??256)},[r,f,u,l,n,a,h,d,i,o,c,v]}class Ze extends te{constructor(e){super(),se(this,e,Qe,Je,ne,{classes:4,crossOrigin:5,src:2,width:0,height:1,quality:6,realTime:7,url:3,showCompressedResult:8})}}function Ee(s){let e,t;return{c(){e=I("img"),this.h()},l(n){e=E(n,"IMG",{src:!0,alt:!0}),this.h()},h(){Ie(e.src,t=s[0])||p(e,"src",t),p(e,"alt","sample output")},m(n,a){V(n,e,a)},p(n,a){a&1&&!Ie(e.src,t=n[0])&&p(e,"src",t)},d(n){n&&b(e)}}}function $e(s){let e,t,n,a,u,r,f,h,d,l,i,o,c,v,g,y,w,R,q,M,k,Y,m,F,re,H,ae,X,le,oe,z;function Se(L){s[1](L)}let he={};s[0]!==void 0&&(he.url=s[0]),w=new Ze({props:he}),ie.push(()=>De(w,"url",Se));let P=s[0]&&Ee(s);return{c(){e=I("div"),t=I("h1"),n=O("Svelte Image Input and Manipulation Components"),a=A(),u=I("h2"),r=O("ImageInput Example"),f=A(),h=I("p"),d=O(`Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. Click
		"Save Image" to display the data URL.`),l=A(),i=I("div"),o=I("div"),c=I("h3"),v=O("Input Image"),g=A(),y=I("div"),ue(w.$$.fragment),q=A(),M=I("div"),k=I("h3"),Y=O("Output Image"),m=A(),F=I("div"),P&&P.c(),re=A(),H=I("p"),ae=O("Check out the code on "),X=I("a"),le=O("GitHub"),oe=O("."),this.h()},l(L){e=E(L,"DIV",{class:!0});var C=D(e);t=E(C,"H1",{class:!0});var W=D(t);n=T(W,"Svelte Image Input and Manipulation Components"),W.forEach(b),a=U(C),u=E(C,"H2",{class:!0});var de=D(u);r=T(de,"ImageInput Example"),de.forEach(b),f=U(C),h=E(C,"P",{class:!0});var me=D(h);d=T(me,`Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. Click
		"Save Image" to display the data URL.`),me.forEach(b),l=U(C),i=E(C,"DIV",{class:!0});var K=D(i);o=E(K,"DIV",{class:!0});var J=D(o);c=E(J,"H3",{class:!0});var pe=D(c);v=T(pe,"Input Image"),pe.forEach(b),g=U(J),y=E(J,"DIV",{class:!0});var _e=D(y);fe(w.$$.fragment,_e),_e.forEach(b),J.forEach(b),q=U(K),M=E(K,"DIV",{class:!0});var Q=D(M);k=E(Q,"H3",{class:!0});var ve=D(k);Y=T(ve,"Output Image"),ve.forEach(b),m=U(Q),F=E(Q,"DIV",{class:!0});var we=D(F);P&&P.l(we),we.forEach(b),Q.forEach(b),K.forEach(b),re=U(C),H=E(C,"P",{class:!0});var Z=D(H);ae=T(Z,"Check out the code on "),X=E(Z,"A",{href:!0,target:!0,rel:!0,class:!0});var be=D(X);le=T(be,"GitHub"),be.forEach(b),oe=T(Z,"."),Z.forEach(b),C.forEach(b),this.h()},h(){p(t,"class","svelte-abcas6"),p(u,"class","svelte-abcas6"),p(h,"class","svelte-abcas6"),p(c,"class","svelte-abcas6"),p(y,"class","imagebox svelte-abcas6"),p(o,"class","input"),p(k,"class","svelte-abcas6"),p(F,"class","imagebox svelte-abcas6"),p(M,"class","output"),p(i,"class","demo svelte-abcas6"),p(X,"href","https://github.com/saabi/svelte-image-input"),p(X,"target","_blank"),p(X,"rel","noopener noreferrer"),p(X,"class","svelte-abcas6"),p(H,"class","svelte-abcas6"),p(e,"class","container svelte-abcas6")},m(L,C){V(L,e,C),_(e,t),_(t,n),_(e,a),_(e,u),_(u,r),_(e,f),_(e,h),_(h,d),_(e,l),_(e,i),_(i,o),_(o,c),_(c,v),_(o,g),_(o,y),ce(w,y,null),_(i,q),_(i,M),_(M,k),_(k,Y),_(M,m),_(M,F),P&&P.m(F,null),_(e,re),_(e,H),_(H,ae),_(H,X),_(X,le),_(H,oe),z=!0},p(L,[C]){const W={};!R&&C&1&&(R=!0,W.url=L[0],Pe(()=>R=!1)),w.$set(W),L[0]?P?P.p(L,C):(P=Ee(L),P.c(),P.m(F,null)):P&&(P.d(1),P=null)},i(L){z||(x(w.$$.fragment,L),z=!0)},o(L){j(w.$$.fragment,L),z=!1},d(L){L&&b(e),ge(w),P&&P.d()}}}function et(s,e,t){let n="";function a(u){n=u,t(0,n)}return[n,a]}class st extends te{constructor(e){super(),se(this,e,et,$e,ne,{})}}export{st as default};
