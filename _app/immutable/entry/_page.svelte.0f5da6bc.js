import{S as ue,i as oe,s as fe,k as y,l as b,m as L,h as v,n as _,J as Xe,b as N,K as Qe,H as Z,o as Ke,w as ce,q as C,a as X,r as S,c as A,G as d,L as H,M as Ne,N as Je,p as le,v as Ze,d as $,f as xe,g as ee,y as Ie,z as Pe,A as De,B as Le,O as Be,P as ze,Q as Ae,u as Fe,R as Ue,T as $e}from"../chunks/index.529947ac.js";var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});var et={pointerdown:"MSPointerDown",pointerup:"MSPointerUp",pointercancel:"MSPointerCancel",pointermove:"MSPointerMove",pointerover:"MSPointerOver",pointerout:"MSPointerOut",pointerenter:"MSPointerEnter",pointerleave:"MSPointerLeave",gotpointercapture:"MSGotPointerCapture",lostpointercapture:"MSLostPointerCapture",maxTouchPoints:"msMaxTouchPoints"},O={update:function(){typeof window<"u"&&("PointerEvent"in window?(O.hasApi=!0,O.requiresPrefix=!1):window.navigator&&"msPointerEnabled"in window.navigator?(O.hasApi=!0,O.requiresPrefix=!0):(O.hasApi=!1,O.requiresPrefix=void 0),O.maxTouchPoints=O.hasApi&&window.navigator&&window.navigator[O.prefix("maxTouchPoints")]||void 0,O.hasTouch=O.hasApi?O.maxTouchPoints>0:void 0)},prefix:function(e){return O.requiresPrefix&&et[e]||e}};O.update();var W=Ge.default=O;function tt(t){let e={};for(let s in t)e[s]=t[s];return e}function ae(t,e,s,n){const r=t.getMinScale(),o=t.getScale();e<r&&(e=r);let i=t.getOffsetX(),l=t.getOffsetY();i=e*(i+s)/o-s,l=e*(l+n)/o-n,t.setOffsetX(i),t.setOffsetY(l),t.setScale(e)}function We(t,e,s){if(t.shiftKey)e||(e={x:t.offsetX,y:t.offsetY,s:s.getScale()}),ae(s,e.s+(e.y-t.offsetY)/50,e.x,e.y);else{e=null;let n=s.getOffsetX(),r=s.getOffsetY();n-=t.movementX,r-=t.movementY,s.setOffsetX(n),s.setOffsetY(r)}return e}function st(t,e){function s(u){u.preventDefault(),u.stopPropagation();const a=Math.sign(u.deltaY);ae(e,e.getScale()-a/10,u.offsetX,u.offsetY)}const n=[];function r(u){for(var a=0;a<n.length;a++)if(n[a].pointerId===u.pointerId){const f=tt(u);n[a]=f;break}a===n.length&&n.push(u)}function o(u){for(var a=0;a<n.length;a++)if(n[a].pointerId===u.pointerId){n.splice(a,1);break}}let i=null;function l(u){t.setPointerCapture(u.pointerId),e.getDragging()||(t.addEventListener(W.prefix("pointermove"),h,!0),e.setDragging(!0)),u.preventDefault(),u.stopPropagation(),r(u)}function h(u){if(n.length===1)i=We(u,i,e);else if(n.length===2){const f=n[0].offsetX,g=n[0].offsetY,w=n[1].offsetX,c=n[1].offsetY,E=u.offsetX,P=u.offsetY,q=f-w,V=g-c,Y=Math.sqrt(q*q+V*V);let T,R;u.pointerId===n[0].pointerId?(T=E-w,R=P-c):(T=E-f,R=P-g);var a=Math.sqrt(T*T+R*R);ae(e,e.getScale()*a/Y,E,P)}u.preventDefault(),u.stopPropagation(),r(u)}function m(u){u.preventDefault(),u.stopPropagation(),o(u),t.releasePointerCapture(u.pointerId),n.length===0&&(e.setDragging(!1),t.removeEventListener(W.prefix("pointermove"),h,!0),i=null)}return t.addEventListener(W.prefix("pointerdown"),l,!0),t.addEventListener(W.prefix("pointerup"),m,!0),t.addEventListener("wheel",s,!0),{destroy:()=>{t.removeEventListener(W.prefix("pointerdown"),l,!0),t.removeEventListener(W.prefix("pointerup"),m,!0),t.removeEventListener("wheel",s,!0)}}}function nt(t,e){function s(l){l.preventDefault(),l.stopPropagation();const h=Math.sign(l.deltaY);ae(e,e.getScale()-h/10,l.offsetX,l.offsetY)}let n=null;function r(l){typeof t.setCapture=="function"&&t.setCapture(),e.getDragging()||(t.addEventListener("mousemove",o,!0),window.addEventListener("mouseup",i,!0),e.setDragging(!0)),l.preventDefault(),l.stopPropagation()}function o(l){n=We(l,n,e),l.preventDefault(),l.stopPropagation()}function i(l){l.preventDefault(),l.stopPropagation(),typeof t.releaseCapture=="function"&&t.releaseCapture(),e.setDragging(!1),t.removeEventListener("mousemove",o,!0),window.removeEventListener("mouseup",i,!0),n=null}return t.addEventListener("mousedown",r,!0),t.addEventListener("mouseup",i,!0),t.addEventListener("wheel",s,!0),{destroy:()=>{t.removeEventListener("mousedown",r,!0),t.removeEventListener("mouseup",i,!0),t.removeEventListener("wheel",s,!0)}}}const it=!!globalThis.window,rt=it&&!!W.maxTouchPoints,lt=rt?st:nt;function at(t){let e,s,n,r;return{c(){e=y("canvas"),this.h()},l(o){e=b(o,"CANVAS",{width:!0,height:!0,class:!0}),L(e).forEach(v),this.h()},h(){_(e,"width",t[0]),_(e,"height",t[1]),_(e,"class",s=Xe(t[2])+" svelte-233dc6")},m(o,i){N(o,e,i),t[15](e),n||(r=Qe(lt.call(null,e,t[4])),n=!0)},p(o,[i]){i&1&&_(e,"width",o[0]),i&2&&_(e,"height",o[1]),i&4&&s!==(s=Xe(o[2])+" svelte-233dc6")&&_(e,"class",s)},i:Z,o:Z,d(o){o&&v(e),t[15](null),n=!1,r()}}}function ut(t,e,s){let{src:n}=e,{url:r}=e,{quality:o}=e,{width:i}=e,{height:l}=e,{realTime:h}=e,{crossOrigin:m}=e,{classes:u}=e,{showCompressedResult:a}=e,f,g,w,c=0,E=0,P=1,q=1,V=!1,Y={getMinScale(){return q},getScale(){return P},setScale(p){s(14,P=p)},getOffsetX(){return c},getOffsetY(){return E},setOffsetX(p){s(12,c=p)},setOffsetY(p){s(13,E=p)},setDragging(p){!h&&p===!1&&s(6,r=f.toDataURL("image/jpeg",o)),V=p},getDragging(){return V}};function T(){if(!g||!w)return;c<0&&s(12,c=0),E<0&&s(13,E=0);let p=g.width*P-i;c>p&&s(12,c=p),p=g.height*P-l,E>p&&s(13,E=p),w.resetTransform(),w.clearRect(0,0,i,l),w.translate(-c,-E),w.scale(P,P),w.drawImage(g,0,0),(h||!V)&&s(6,r=f.toDataURL("image/jpeg",o))}Ke(()=>{w=f.getContext("2d"),s(11,g=new Image),s(11,g.onload=function(){s(12,c=0),s(13,E=0),s(14,P=q=Math.max(i/g.width,l/g.height))},g)});function R(p){ce[p?"unshift":"push"](()=>{f=p,s(3,f)})}return t.$$set=p=>{"src"in p&&s(5,n=p.src),"url"in p&&s(6,r=p.url),"quality"in p&&s(7,o=p.quality),"width"in p&&s(0,i=p.width),"height"in p&&s(1,l=p.height),"realTime"in p&&s(8,h=p.realTime),"crossOrigin"in p&&s(9,m=p.crossOrigin),"classes"in p&&s(2,u=p.classes),"showCompressedResult"in p&&s(10,a=p.showCompressedResult)},t.$$.update=()=>{t.$$.dirty&32&&s(5,n=n||""),t.$$.dirty&64&&s(6,r=r||""),t.$$.dirty&1&&s(0,i=i||256),t.$$.dirty&2&&s(1,l=l||256),t.$$.dirty&128&&s(7,o=o||.5),t.$$.dirty&256&&s(8,h=h||!1),t.$$.dirty&512&&s(9,m=m||!1),t.$$.dirty&4&&s(2,u=u||""),t.$$.dirty&1024&&s(10,a=a||!1),t.$$.dirty&2560&&g&&s(11,g.crossOrigin=m?"anonymous":null,g),t.$$.dirty&2080&&g&&s(11,g.src=n,g),t.$$.dirty&28803&&T()},[i,l,u,f,Y,n,r,o,h,m,a,g,c,E,P,R]}class ot extends ue{constructor(e){super(),oe(this,e,ut,at,fe,{src:5,url:6,quality:7,width:0,height:1,realTime:8,crossOrigin:9,classes:2,showCompressedResult:10})}}function ft(t){let e,s,n,r,o,i,l,h;return{c(){e=y("div"),s=C(`Drop, paste, or
	`),n=y("button"),r=C("load an image"),o=X(),i=y("input"),this.h()},l(m){e=b(m,"DIV",{class:!0});var u=L(e);s=S(u,`Drop, paste, or
	`),n=b(u,"BUTTON",{class:!0});var a=L(n);r=S(a,"load an image"),a.forEach(v),u.forEach(v),o=A(m),i=b(m,"INPUT",{type:!0,accept:!0,class:!0}),this.h()},h(){_(n,"class","svelte-10x39c5"),_(e,"class","drop-area svelte-10x39c5"),_(i,"type","file"),_(i,"accept","image/*"),_(i,"class","hidden svelte-10x39c5")},m(m,u){N(m,e,u),d(e,s),d(e,n),d(n,r),N(m,o,u),N(m,i,u),t[6](i),l||(h=[H(window,"paste",t[4]),H(n,"click",t[5]),H(e,"drop",t[3]),H(e,"dragover",t[1]),H(e,"dragenter",t[1]),H(e,"dragleave",t[1]),H(i,"change",t[2])],l=!0)},p:Z,i:Z,o:Z,d(m){m&&v(e),m&&v(o),m&&v(i),t[6](null),l=!1,Ne(h)}}}function ct(t,e,s){const n=Je();let r;const o=f=>{f.preventDefault()},i=f=>{const g=new FileReader;g.onload=w=>{if(!w.target)return;const c=w.target.result;n("imageLoaded",{dataUrl:c})},g.readAsDataURL(f)},l=f=>{var w,c;const g=(c=(w=f.target)==null?void 0:w.files)==null?void 0:c[0];g&&i(g)},h=f=>{var E;f.preventDefault();const g=(E=f.dataTransfer)==null?void 0:E.items;if(!g)return;const w=Array.from(g).find(P=>P.kind==="file"&&P.type.startsWith("image/"));if(!w)return;const c=w.getAsFile();c&&i(c)},m=async f=>{var E;const g=(E=f.clipboardData)==null?void 0:E.items;if(!g)return;const w=Array.from(g).find(P=>P.type.indexOf("image")===0);if(!w)return;f.preventDefault();const c=w.getAsFile();c&&i(c)},u=()=>{r.click()};function a(f){ce[f?"unshift":"push"](()=>{r=f,s(0,r)})}return[r,o,l,h,m,u,a]}class gt extends ue{constructor(e){super(),oe(this,e,ct,ft,fe,{})}}function ht(t){let e,s;return e=new gt({}),e.$on("imageLoaded",t[11]),{c(){Ie(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){De(e,n,r),s=!0},p:Z,i(n){s||(ee(e.$$.fragment,n),s=!0)},o(n){$(e.$$.fragment,n),s=!1},d(n){Le(e,n)}}}function dt(t){let e,s,n,r,o,i,l,h;function m(a){t[10](a)}let u={classes:t[4],crossOrigin:t[5],height:t[1],realTime:t[7],src:t[2],showCompressedResult:t[8],quality:t[6],width:t[0]};return t[3]!==void 0&&(u.url=t[3]),e=new ot({props:u}),ce.push(()=>Be(e,"url",m)),{c(){Ie(e.$$.fragment),n=X(),r=y("button"),o=C("X"),this.h()},l(a){Pe(e.$$.fragment,a),n=A(a),r=b(a,"BUTTON",{class:!0});var f=L(r);o=S(f,"X"),f.forEach(v),this.h()},h(){_(r,"class","svelte-8cxrdt")},m(a,f){De(e,a,f),N(a,n,f),N(a,r,f),d(r,o),i=!0,l||(h=H(r,"click",t[9]),l=!0)},p(a,f){const g={};f&16&&(g.classes=a[4]),f&32&&(g.crossOrigin=a[5]),f&2&&(g.height=a[1]),f&128&&(g.realTime=a[7]),f&4&&(g.src=a[2]),f&256&&(g.showCompressedResult=a[8]),f&64&&(g.quality=a[6]),f&1&&(g.width=a[0]),!s&&f&8&&(s=!0,g.url=a[3],ze(()=>s=!1)),e.$set(g)},i(a){i||(ee(e.$$.fragment,a),i=!0)},o(a){$(e.$$.fragment,a),i=!1},d(a){Le(e,a),a&&v(n),a&&v(r),l=!1,h()}}}function mt(t){let e,s,n,r;const o=[dt,ht],i=[];function l(h,m){return h[2]?0:1}return s=l(t),n=i[s]=o[s](t),{c(){e=y("div"),n.c(),this.h()},l(h){e=b(h,"DIV",{class:!0,style:!0});var m=L(e);n.l(m),m.forEach(v),this.h()},h(){_(e,"class","ImageInput svelte-8cxrdt"),le(e,"--image-input-width",t[0]+"px"),le(e,"--image-input-height",t[1]+"px")},m(h,m){N(h,e,m),i[s].m(e,null),r=!0},p(h,[m]){let u=s;s=l(h),s===u?i[s].p(h,m):(Ze(),$(i[u],1,1,()=>{i[u]=null}),xe(),n=i[s],n?n.p(h,m):(n=i[s]=o[s](h),n.c()),ee(n,1),n.m(e,null)),(!r||m&1)&&le(e,"--image-input-width",h[0]+"px"),(!r||m&2)&&le(e,"--image-input-height",h[1]+"px")},i(h){r||(ee(n),r=!0)},o(h){$(n),r=!1},d(h){h&&v(e),i[s].d()}}}function pt(t,e,s){let{classes:n=""}=e,{crossOrigin:r=!1}=e,{src:o=""}=e,{width:i=256}=e,{height:l=256}=e,{quality:h=.5}=e,{realTime:m=!1}=e,{url:u=""}=e,{showCompressedResult:a=!1}=e;const f=()=>{s(2,o=""),s(3,u="")};function g(c){u=c,s(3,u)}const w=({detail:{dataUrl:c}})=>s(2,o=c);return t.$$set=c=>{"classes"in c&&s(4,n=c.classes),"crossOrigin"in c&&s(5,r=c.crossOrigin),"src"in c&&s(2,o=c.src),"width"in c&&s(0,i=c.width),"height"in c&&s(1,l=c.height),"quality"in c&&s(6,h=c.quality),"realTime"in c&&s(7,m=c.realTime),"url"in c&&s(3,u=c.url),"showCompressedResult"in c&&s(8,a=c.showCompressedResult)},t.$$.update=()=>{t.$$.dirty&1&&s(0,i=i??256),t.$$.dirty&2&&s(1,l=l??256)},[i,l,o,u,n,r,h,m,a,f,g,w]}class _t extends ue{constructor(e){super(),oe(this,e,pt,mt,fe,{classes:4,crossOrigin:5,src:2,width:0,height:1,quality:6,realTime:7,url:3,showCompressedResult:8})}}function Ve(t){let e,s;return{c(){e=y("img"),this.h()},l(n){e=b(n,"IMG",{src:!0,alt:!0}),this.h()},h(){Ue(e.src,s=t[0])||_(e,"src",s),_(e,"alt","sample output")},m(n,r){N(n,e,r)},p(n,r){r&1&&!Ue(e.src,s=n[0])&&_(e,"src",s)},d(n){n&&v(e)}}}function He(t){let e,s,n=t[0].length+"",r,o;return{c(){e=y("p"),s=C("data url size: "),r=C(n),o=C(" bytes"),this.h()},l(i){e=b(i,"P",{class:!0});var l=L(e);s=S(l,"data url size: "),r=S(l,n),o=S(l," bytes"),l.forEach(v),this.h()},h(){_(e,"class","svelte-1gtduqc")},m(i,l){N(i,e,l),d(e,s),d(e,r),d(e,o)},p(i,l){l&1&&n!==(n=i[0].length+"")&&Fe(r,n)},d(i){i&&v(e)}}}function vt(t){let e,s,n,r,o,i,l,h,m,u,a,f,g,w=Math.round(t[1]*100)+"",c,E,P,q,V,Y,T,R,p,ge,j,B,he,de,U,Q,me,pe,G,_e,ve,F,we,z,ye,be,x,Ee,qe;function je(I){t[3](I)}let Ce={quality:t[1]};t[0]!==void 0&&(Ce.url=t[0]),B=new _t({props:Ce}),ce.push(()=>Be(B,"url",je));let k=t[0]&&Ve(t),M=t[0]&&He(t);return{c(){e=y("div"),s=y("h1"),n=C("Svelte Image Input and Manipulation Components"),r=X(),o=y("h2"),i=C("ImageInput Example"),l=X(),h=y("p"),m=C(`Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. Click
		"Save Image" to display the data URL.`),u=X(),a=y("label"),f=y("span"),g=C("Quality ("),c=C(w),E=C("%):"),P=X(),q=y("input"),V=X(),Y=y("div"),T=y("div"),R=y("h3"),p=C("Input Image"),ge=X(),j=y("div"),Ie(B.$$.fragment),de=X(),U=y("div"),Q=y("h3"),me=C("Output Image"),pe=X(),G=y("div"),k&&k.c(),_e=X(),M&&M.c(),ve=X(),F=y("p"),we=C("Check out the code on "),z=y("a"),ye=C("GitHub"),be=C("."),this.h()},l(I){e=b(I,"DIV",{class:!0});var D=L(e);s=b(D,"H1",{class:!0});var K=L(s);n=S(K,"Svelte Image Input and Manipulation Components"),K.forEach(v),r=A(D),o=b(D,"H2",{class:!0});var Se=L(o);i=S(Se,"ImageInput Example"),Se.forEach(v),l=A(D),h=b(D,"P",{class:!0});var ke=L(h);m=S(ke,`Load an image using drag and drop, clipboard paste, or by clicking the
		"Load an image" button. Then, resize and crop the image. Click
		"Save Image" to display the data URL.`),ke.forEach(v),u=A(D),a=b(D,"LABEL",{});var te=L(a);f=b(te,"SPAN",{});var se=L(f);g=S(se,"Quality ("),c=S(se,w),E=S(se,"%):"),se.forEach(v),P=A(te),q=b(te,"INPUT",{type:!0,min:!0,max:!0,step:!0}),te.forEach(v),V=A(D),Y=b(D,"DIV",{class:!0});var ne=L(Y);T=b(ne,"DIV",{class:!0});var ie=L(T);R=b(ie,"H3",{class:!0});var Me=L(R);p=S(Me,"Input Image"),Me.forEach(v),ge=A(ie),j=b(ie,"DIV",{class:!0});var Te=L(j);Pe(B.$$.fragment,Te),Te.forEach(v),ie.forEach(v),de=A(ne),U=b(ne,"DIV",{class:!0});var J=L(U);Q=b(J,"H3",{class:!0});var Oe=L(Q);me=S(Oe,"Output Image"),Oe.forEach(v),pe=A(J),G=b(J,"DIV",{class:!0});var Re=L(G);k&&k.l(Re),Re.forEach(v),_e=A(J),M&&M.l(J),J.forEach(v),ne.forEach(v),ve=A(D),F=b(D,"P",{class:!0});var re=L(F);we=S(re,"Check out the code on "),z=b(re,"A",{href:!0,target:!0,rel:!0,class:!0});var Ye=L(z);ye=S(Ye,"GitHub"),Ye.forEach(v),be=S(re,"."),re.forEach(v),D.forEach(v),this.h()},h(){_(s,"class","svelte-1gtduqc"),_(o,"class","svelte-1gtduqc"),_(h,"class","svelte-1gtduqc"),_(q,"type","range"),_(q,"min","0.1"),_(q,"max","1"),_(q,"step","0.1"),_(R,"class","svelte-1gtduqc"),_(j,"class","imagebox svelte-1gtduqc"),_(T,"class","input"),_(Q,"class","svelte-1gtduqc"),_(G,"class","imagebox svelte-1gtduqc"),_(U,"class","output"),_(Y,"class","demo svelte-1gtduqc"),_(z,"href","https://github.com/saabi/svelte-image-input"),_(z,"target","_blank"),_(z,"rel","noopener noreferrer"),_(z,"class","svelte-1gtduqc"),_(F,"class","svelte-1gtduqc"),_(e,"class","container svelte-1gtduqc")},m(I,D){N(I,e,D),d(e,s),d(s,n),d(e,r),d(e,o),d(o,i),d(e,l),d(e,h),d(h,m),d(e,u),d(e,a),d(a,f),d(f,g),d(f,c),d(f,E),d(a,P),d(a,q),Ae(q,t[1]),d(e,V),d(e,Y),d(Y,T),d(T,R),d(R,p),d(T,ge),d(T,j),De(B,j,null),d(Y,de),d(Y,U),d(U,Q),d(Q,me),d(U,pe),d(U,G),k&&k.m(G,null),d(U,_e),M&&M.m(U,null),d(e,ve),d(e,F),d(F,we),d(F,z),d(z,ye),d(F,be),x=!0,Ee||(qe=[H(q,"change",t[2]),H(q,"input",t[2])],Ee=!0)},p(I,[D]){(!x||D&2)&&w!==(w=Math.round(I[1]*100)+"")&&Fe(c,w),D&2&&Ae(q,I[1]);const K={};D&2&&(K.quality=I[1]),!he&&D&1&&(he=!0,K.url=I[0],ze(()=>he=!1)),B.$set(K),I[0]?k?k.p(I,D):(k=Ve(I),k.c(),k.m(G,null)):k&&(k.d(1),k=null),I[0]?M?M.p(I,D):(M=He(I),M.c(),M.m(U,null)):M&&(M.d(1),M=null)},i(I){x||(ee(B.$$.fragment,I),x=!0)},o(I){$(B.$$.fragment,I),x=!1},d(I){I&&v(e),Le(B),k&&k.d(),M&&M.d(),Ee=!1,Ne(qe)}}}function wt(t,e,s){let n="",r=.9;function o(){r=$e(this.value),s(1,r)}function i(l){n=l,s(0,n)}return[n,r,o,i]}class bt extends ue{constructor(e){super(),oe(this,e,wt,vt,fe,{})}}export{bt as default};
